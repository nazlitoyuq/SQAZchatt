# backend.py
from flask import Flask, request, jsonify, send_from_directory
import random
import os

app = Flask(__name__, static_folder="frontend")

# === –ü–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã (1000) ===
responses = {
    "–ø—Ä–∏–≤–µ—Ç": "–ü—Ä–∏–≤–µ—Ç!",
    "–∫–∞–∫ –¥–µ–ª–∞": "–û—Ç–ª–∏—á–Ω–æ, —Å–ø–∞—Å–∏–±–æ!",
    "—á—Ç–æ –¥–µ–ª–∞–µ—à—å": "–ü–æ–º–æ–≥–∞—é —Ç–µ–±–µ —É—á–∏—Ç—å—Å—è –∏ —Ä–∞–∑–≤–ª–µ–∫–∞—Ç—å—Å—è.",
    "–∫–∞–∫ —Ç–µ–±—è –∑–æ–≤—É—Ç": "–Ø SQAZchat, —Ç–≤–æ–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫.",
    "–ø–æ–∫–∞": "–î–æ –≤—Å—Ç—Ä–µ—á–∏!",
    "—Ç—ã —É–º–µ–µ—à—å —à—É—Ç–∏—Ç—å": "–ö–æ–Ω–µ—á–Ω–æ! –ü–æ—á–µ–º—É –∫–æ–º–ø—å—é—Ç–µ—Ä –Ω–µ —É–º–µ–µ—Ç –ø–ª–∞–≤–∞—Ç—å? –ü–æ—Ç–æ–º—É —á—Ç–æ –±–æ–∏—Ç—Å—è –≤–∏—Ä—É—Å–æ–≤ üòÑ",
    "–∫–∞–∫–∞—è —Å–µ–≥–æ–¥–Ω—è –ø–æ–≥–æ–¥–∞": "–Ø –Ω–µ –∑–Ω–∞—é –ø–æ–≥–æ–¥—É, –Ω–æ –º–æ–≥—É –ø–æ–¥–¥–µ—Ä–∂–∞—Ç—å –±–µ—Å–µ–¥—É!",
    "—Å–ø–∞—Å–∏–±–æ": "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞!",
    "—Ç—ã —á–µ–ª–æ–≤–µ–∫": "–ù–µ—Ç, —è –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç.",
    "—á—Ç–æ —Ç—ã –º–æ–∂–µ—à—å": "–ú–æ–≥—É –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã, —Å—á–∏—Ç–∞—Ç—å –∏ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–º–µ—Ä—ã."
}

# –ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–æ 1000 —Å–ª—É—á–∞–π–Ω—ã–º–∏ —Ñ—Ä–∞–∑–∞–º–∏
for i in range(10, 1000):
    responses[f"–≤–æ–ø—Ä–æ—Å{i}"] = f"–≠—Ç–æ –æ—Ç–≤–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å {i}"


@app.route("/chat", methods=["POST"])
def chat():
    data = request.json
    user_message = data.get("message", "").lower()

    # –∏—â–µ–º —Ç–æ—á–Ω—ã–π –æ—Ç–≤–µ—Ç
    answer = responses.get(user_message)

    # –µ—Å–ª–∏ –Ω–µ—Ç —Ç–æ—á–Ω–æ–≥–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —Å–ª—É—á–∞–π–Ω—ã–π –æ—Ç–≤–µ—Ç
    if not answer:
        answer = random.choice(list(responses.values()))

    return jsonify({"reply": answer})


# === –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ ===
@app.route("/", defaults={"path": ""})
@app.route("/<path:path>")
def serve_frontend(path):
    if path != "" and os.path.exists(f"frontend/{path}"):
        return send_from_directory("frontend", path)
    else:
        return send_from_directory("frontend", "index.html")


if __name__ == "__main__":
    app.run(debug=True)
